<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åŒ—æ­è¨­è¨ˆèˆ‡æ–‡åŒ–æ…¢æ—… â€“ è¡Œç¨‹èˆ‡æ¶ˆè²»è¨˜éŒ„</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; color: #333; }
    header { background: #20415a; color: white; padding: 20px; text-align: center; }
    .trip-card { background: white; margin: 20px auto; padding: 20px; border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08); width: 90%; max-width: 600px; transition: all 0.5s ease; }
    .trip-card:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.15); }
    .date { font-weight: bold; font-size: 1.3em; margin-bottom: 5px; }
    .weather { color: #555; margin-bottom: 10px; }
    ul { margin: 0; padding-left: 20px; }
  </style>
</head>
<body>
<header>
  <h1>åŒ—æ­è¨­è¨ˆèˆ‡æ–‡åŒ–æ…¢æ—… â€“ è¡Œç¨‹èˆ‡æ¶ˆè²»è¨˜éŒ„</h1>
  <p>2025 å¹´ 8 æœˆ</p>
</header>

<div id="itinerary"></div>

<script>
const itinerary = [
  {date: "2025-08-10", city: "Copenhagen", sites: ["æ–°æ¸¯ Nyhavn", "å°ç¾äººé­šé›•åƒ", "é˜¿ç¾ç³å ¡å®®", "ç¾…æ£®å ¡å®®"], lat:55.6761, lon:12.5683},
  {date: "2025-08-11", city: "Copenhagen", sites: ["åœ“å¡” Round Tower", "å¤§ç†çŸ³æ•™å ‚ Marble Church", "åœ‹å®¶ç¾è¡“é¤¨ SMK"], lat:55.6761, lon:12.5683},
  {date: "2025-08-17", city: "Helsinki", sites: ["èŠ¬è˜­åœ‹å®¶åšç‰©é¤¨", "å¡çš®è€¶åˆ©å’–å•¡é¤¨", "ç¾…ä¼Šåˆ©æµ·é‚Šæ¡‘æ‹¿"], lat:60.1699, lon:24.9384}
];

function renderItinerary() {
  const container = document.getElementById("itinerary");
  container.innerHTML = "";
  itinerary.forEach(day => {
    const card = document.createElement("div");
    card.className = "trip-card";
    card.innerHTML = `<div class="date">${day.date} ${day.city}è¡Œç¨‹</div>
                      <div class="weather">è¼‰å…¥å¤©æ°£ä¸­...</div>
                      <ul>${day.sites.map(s => `<li>${s}</li>`).join('')}</ul>`;
    container.appendChild(card);
    fetchWeather(day.lat, day.lon, card.querySelector(".weather"), day.city);
  });
}

function fetchWeather(lat, lon, weatherEl, city) {
  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`)
    .then(res => res.json())
    .then(data => {
      if(data.current_weather){
        const temp = data.current_weather.temperature;
        const wind = data.current_weather.windspeed;
        weatherEl.textContent = `${city}ï¼š${temp}Â°C ğŸŒ¤ é¢¨é€Ÿ ${wind} km/h`;
        localStorage.setItem(city+"_weather", weatherEl.textContent);
      } else {
        showCachedWeather(weatherEl, city);
      }
    })
    .catch(() => showCachedWeather(weatherEl, city));
}

function showCachedWeather(weatherEl, city) {
  const cached = localStorage.getItem(city+"_weather");
  weatherEl.textContent = cached || (city+"ï¼šå¤©æ°£è³‡æ–™ä¸å¯ç”¨");
}

renderItinerary();
</script>
</body>
</html>
