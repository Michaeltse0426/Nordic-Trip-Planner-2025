<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>北歐設計與文化慢旅 - 行程與消費記錄</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<style>
body { font-family: Arial, sans-serif; background: #f4f6f9; margin: 0; }
header { background: #20415a; color: white; padding: 20px; text-align: center; }
.card { background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin: 20px; padding: 20px; transition: 0.5s; }
.card:hover { transform: translateY(-5px); }
.weather { font-size: 16px; margin: 5px 0; }
.fade-in { animation: fadeIn 1.2s ease-in; }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>
<header>
  <h1>北歐設計與文化慢旅 - 行程與消費記錄</h1>
  <p>2025 年 8 月</p>
</header>
<div id="itinerary"></div>

<script>
const itineraryData = [
  { date: "2025-08-10", city: "Copenhagen", events: ["新港 Nyhavn", "小美人魚雕像", "阿美琳堡宮", "羅森堡宮"] },
  { date: "2025-08-11", city: "Copenhagen", events: ["圓塔 Round Tower", "大理石教堂 Marble Church", "國家美術館 SMK"] },
  { date: "2025-08-17", city: "Helsinki", events: ["芬蘭國家博物館", "卡皮耶利咖啡館", "羅伊利海邊桑拿"] }
];

const weatherApiKey = "77c94a0c472b21822cff6f94ef50375d"; 
const itineraryContainer = document.getElementById('itinerary');

async function fetchWeather(city) {
  try {
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&lang=zh_tw&appid=${weatherApiKey}`;
    const res = await fetch(url);
    const data = await res.json();
    if (data.main) {
      return {
        temp: data.main.temp.toFixed(1),
        wind: data.wind.speed.toFixed(1),
        icon: data.weather[0].icon
      };
    }
    return null;
  } catch {
    return null;
  }
}

async function renderItinerary() {
  for (let item of itineraryData) {
    const card = document.createElement('div');
    card.className = 'card fade-in';
    
    let weatherInfo = '<div class="weather">天氣資料不可用</div>';
    const weather = await fetchWeather(item.city);
    if (weather) {
      weatherInfo = `<div class="weather">${item.city}：${weather.temp}°C 
        <img src="https://openweathermap.org/img/wn/${weather.icon}.png" alt="weather" style="vertical-align:middle;"> 
        風速 ${weather.wind} km/h</div>`;
    }

    card.innerHTML = `<h3>${item.date} ${item.city}行程</h3>${weatherInfo}<ul>` +
                     item.events.map(e => `<li>${e}</li>`).join('') +
                     `</ul>`;
    itineraryContainer.appendChild(card);
  }
}

renderItinerary();
</script>
</body>
</html>
